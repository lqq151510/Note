# 面向对象基础

## 一、什么是面向对象？

**面向对象编程**（OOP）是一种编程范式，将现实世界的事物抽象为**对象**，对象包含**数据**（属性）和**行为**（方法）。

### 对比：面向过程 vs 面向对象

```
// 面向过程 - 关注步骤
double width = 10;
double height = 5;
double area = width * height;  // 直接计算

// 面向对象 - 关注对象
Rectangle rect = new Rectangle(10, 5);
double area = rect.calculateArea();  // 对象计算
```

---

## 二、三大核心概念（基础版）

### 1. 封装

**将数据和操作数据的方法包装在一起**

```
// 一个简单的封装示例
class Student {
    // 私有属性 - 隐藏内部数据
    private String name;
    private int score;
    
    // 公开的方法 - 提供访问接口
    public Student(String name) {
        this.name = name;
        this.score = 0;
    }
    
    // Getter方法 - 获取数据
    public String getName() {
        return name;
    }
    
    public int getScore() {
        return score;
    }
    
    // Setter方法 - 修改数据（可添加验证逻辑）
    public void setScore(int newScore) {
        if (newScore >= 0 && newScore <= 100) {
            this.score = newScore;
        } else {
            System.out.println("分数必须在0-100之间");
        }
    }
    
    // 行为方法
    public void study() {
        score += 5;
        System.out.println(name + "学习后，分数增加到：" + score);
    }
}

// 使用
Student stu = new Student("张三");
stu.setScore(85);
stu.study();
System.out.println("当前分数：" + stu.getScore());
```

### 2. 继承

**子类可以继承父类的属性和方法**

```
// 父类
class Animal {
    String name;
    int age;
    
    public void eat() {
        System.out.println(name + "在吃东西");
    }
    
    public void sleep() {
        System.out.println(name + "在睡觉");
    }
}

// 子类
class Dog extends Animal {  // extends 表示继承
    String breed;  // 子类特有属性
    
    public void bark() {
        System.out.println(name + "在汪汪叫");
    }
}

// 使用
Dog myDog = new Dog();
myDog.name = "旺财";  // 继承自父类
myDog.breed = "金毛";  // 子类特有
myDog.eat();    // 继承的方法
myDog.bark();   // 子类的方法
```

### 3. 多态

**同一操作作用于不同对象，产生不同结果**

```
// 父类引用指向子类对象
Animal myAnimal = new Dog();  // 这是多态
myAnimal.eat();  // 调用的是Dog的eat方法（如果有重写）

// 方法重写实现多态
class Cat extends Animal {
    @Override
    public void eat() {
        System.out.println(name + "在吃鱼");  // 重写父类方法
    }
}

// 多态的实际应用
Animal[] animals = new Animal[2];
animals[0] = new Dog();
animals[1] = new Cat();

for (Animal animal : animals) {
    animal.eat();  // 同一个方法，不同表现
    // Dog对象：在吃东西
    // Cat对象：在吃鱼
}
```

---

## 三、类和对象：基础理解

### 什么是类和对象？

- **类**：蓝图、模板
    
- **对象**：根据蓝图创建的具体实例
    

```
// 类：手机设计图
class Phone {
    // 属性
    String brand;
    String model;
    int battery = 100;
    
    // 方法
    public void call(String number) {
        System.out.println("正在给" + number + "打电话");
        battery -= 5;
    }
    
    public void charge() {
        battery = 100;
        System.out.println("电量已充满");
    }
    
    public void showInfo() {
        System.out.println(brand + " " + model + 
                          " 电量：" + battery + "%");
    }
}

// 对象：根据设计图制造的手机
public class Main {
    public static void main(String[] args) {
        // 创建对象
        Phone myPhone = new Phone();
        Phone yourPhone = new Phone();
        
        // 设置属性
        myPhone.brand = "华为";
        myPhone.model = "P50";
        
        yourPhone.brand = "苹果";
        yourPhone.model = "iPhone 13";
        
        // 使用对象
        myPhone.call("13800138000");
        myPhone.showInfo();
        
        yourPhone.charge();
        yourPhone.showInfo();
    }
}
```

---

## 四、构造方法

**用于初始化对象的特殊方法**

```
class Person {
    String name;
    int age;
    String gender;
    
    // 1. 无参构造方法
    public Person() {
        this.name = "未知";
        this.age = 0;
        this.gender = "未知";
    }
    
    // 2. 有参构造方法
    public Person(String name, int age) {
        this.name = name;
        this.age = age;
        this.gender = "未知";
    }
    
    // 3. 全参构造方法
    public Person(String name, int age, String gender) {
        this.name = name;
        this.age = age;
        this.gender = gender;
    }
    
    public void introduce() {
        System.out.println("我叫" + name + "，今年" + age + "岁");
    }
}

// 使用不同构造方法创建对象
Person p1 = new Person();  // 使用无参构造
Person p2 = new Person("张三", 20);  // 使用有参构造
Person p3 = new Person("李四", 25, "男");  // 使用全参构造
```

---

## 五、this关键字

**指代当前对象的引用**

```
class Car {
    String brand;
    String color;
    int speed;
    
    // 使用this区分同名参数
    public Car(String brand, String color) {
        this.brand = brand;  // this.brand 指属性
        this.color = color;  // brand 指参数
    }
    
    // 使用this调用其他构造方法
    public Car(String brand) {
        this(brand, "白色");  // 调用上面的构造方法
    }
    
    // 使用this返回当前对象
    public Car setSpeed(int speed) {
        this.speed = speed;
        return this;  // 返回当前对象，支持链式调用
    }
    
    public void showInfo() {
        System.out.println(brand + " " + color + " 速度：" + speed);
    }
}

// 链式调用
new Car("奔驰").setSpeed(100).showInfo();
```

---

## 六、static关键字

**属于类，而不是对象**

```
class Calculator {
    // 静态属性 - 类属性
    static double pi = 3.14159;
    static int count = 0;  // 统计创建的对象数
    
    // 实例属性
    String model;
    
    // 构造方法
    public Calculator(String model) {
        this.model = model;
        count++;  // 每次创建对象，count加1
    }
    
    // 静态方法 - 类方法
    public static double circleArea(double radius) {
        return pi * radius * radius;
    }
    
    // 实例方法
    public void showInfo() {
        System.out.println("计算器型号：" + model);
    }
}

// 使用
// 1. 访问静态成员
System.out.println("PI = " + Calculator.pi);
System.out.println("圆面积：" + Calculator.circleArea(5));
System.out.println("已创建计算器：" + Calculator.count + "个");

// 2. 创建对象
Calculator cal1 = new Calculator("科学计算器");
Calculator cal2 = new Calculator("普通计算器");

System.out.println("已创建计算器：" + Calculator.count + "个");  // 输出2
```

---

## 七、包和访问控制

### 包的概念

```
// 文件位置：com/school/Student.java
package com.school;  // 包声明

public class Student {
    public String name;      // 公共
    protected int age;       // 受保护
    String className;        // 默认
    private String id;       // 私有
}
```

### 访问修饰符

```
class Example {
    public int a = 1;        // 任何地方
    protected int b = 2;     // 同包 + 子类
    int c = 3;              // 同包
    private int d = 4;      // 本类
}
```

---

## 八、基本示例：学生管理系统

```
// 学生类
class Student {
    private String name;
    private int id;
    private int score;
    
    public Student(String name, int id) {
        this.name = name;
        this.id = id;
        this.score = 0;
    }
    
    public void takeExam(int score) {
        this.score = score;
    }
    
    public String getGrade() {
        if (score >= 90) return "A";
        else if (score >= 80) return "B";
        else if (score >= 60) return "C";
        else return "D";
    }
    
    public void showInfo() {
        System.out.println("学号：" + id + " 姓名：" + name + 
                          " 分数：" + score + " 等级：" + getGrade());
    }
}

// 班级类
class Classroom {
    private String className;
    private Student[] students;
    private int count = 0;
    
    public Classroom(String className, int capacity) {
        this.className = className;
        this.students = new Student[capacity];
    }
    
    public void addStudent(Student student) {
        if (count < students.length) {
            students[count] = student;
            count++;
        }
    }
    
    public void showAllStudents() {
        System.out.println("=== " + className + "班学生列表 ===");
        for (int i = 0; i < count; i++) {
            students[i].showInfo();
        }
    }
}

// 主程序
public class SchoolSystem {
    public static void main(String[] args) {
        // 创建班级
        Classroom class1 = new Classroom("三年级一班", 30);
        
        // 创建学生
        Student stu1 = new Student("张三", 1001);
        Student stu2 = new Student("李四", 1002);
        Student stu3 = new Student("王五", 1003);
        
        // 学生参加考试
        stu1.takeExam(95);
        stu2.takeExam(78);
        stu3.takeExam(60);
        
        // 添加学生到班级
        class1.addStudent(stu1);
        class1.addStudent(stu2);
        class1.addStudent(stu3);
        
        // 显示所有学生
        class1.showAllStudents();
    }
}
```

---

## 九、常见错误和注意事项

### 1. 对象比较

```
String s1 = "hello";
String s2 = new String("hello");

System.out.println(s1 == s2);        // false - 比较引用地址
System.out.println(s1.equals(s2));   // true - 比较内容
```

### 2. 空指针异常

```
Student stu = null;
// stu.showInfo();  // 错误：空指针异常

// 正确做法
if (stu != null) {
    stu.showInfo();
}
```

### 3. 循环依赖

```
// 避免这种情况
class A {
    B b = new B();
}

class B {
    A a = new A();  // 无限循环创建对象
}
```

---

## 十、快速练习

### 练习1：创建图书类

```
class Book {
    // TODO: 添加属性：书名、作者、价格
    // TODO: 添加构造方法
    // TODO: 添加显示信息的方法
    // TODO: 添加打折方法
}
```

### 练习2：创建银行账户类

```
class BankAccount {
    // TODO: 添加属性：账号、余额
    // TODO: 添加存款、取款方法
    // TODO: 添加查看余额方法
    // TODO: 添加转账方法
}
```

### 练习3：计算器类

```
class SimpleCalculator {
    // TODO: 实现加、减、乘、除方法
    // TODO: 实现开方、平方方法
    // TODO: 添加历史记录功能
}
```

---

## 学习要点总结

1. **理解核心概念**
    
    - 类 = 设计图
        
    - 对象 = 根据设计图制造的产品
        
    - 属性 = 对象的特征
        
    - 方法 = 对象的行为
        
    
2. **掌握三个特性**
    
    - 封装：隐藏细节，提供接口
        
    - 继承：复用代码，扩展功能
        
    - 多态：同一接口，不同实现
        
    
3. **实践建议**
    
    - 从简单的类开始练习
        
    - 多思考现实世界的对象如何抽象
        
    - 尝试实现完整的小系统
        
    - 调试时使用断点查看对象状态
        
    
4. **下一步学习**
    
    - 深入学习继承、多态
        
    - 学习接口和抽象类
        
    - 掌握异常处理
        
    - 学习集合框架
        
    

记住：**面向对象是一种思维方式**，不仅仅是编程技术。多思考"什么是什么"、"什么能做什么"、"什么之间有什么关系"。