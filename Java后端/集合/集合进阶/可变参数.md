在 Java 中，**可变参数（Varargs）**​ 允许方法接受**零个或多个**指定类型的参数。它实际上是一个语法糖，底层是用数组实现的。

## 基本语法

```
返回类型 方法名(类型... 参数名) {
    // 方法体
}
```

## 简单示例

```
public class VarargsExample {
    // 使用可变参数的方法
    public static int sum(int... numbers) {
        int total = 0;
        for (int num : numbers) {
            total += num;
        }
        return total;
    }
    
    public static void main(String[] args) {
        // 可以传递不同数量的参数
        System.out.println(sum());           // 0
        System.out.println(sum(1));          // 1
        System.out.println(sum(1, 2));       // 3
        System.out.println(sum(1, 2, 3, 4)); // 10
        
        // 也可以传递数组
        int[] arr = {1, 2, 3, 4, 5};
        System.out.println(sum(arr));        // 15
    }
}
```

## 使用规则和注意事项

### 1. **只能有一个可变参数**

```
// 正确
void method(String... strings) { }

// 错误 - 编译错误
void method(String... strings, int... numbers) { }
```

### 2. **可变参数必须是最后一个参数**

```
// 正确
void method(String message, int... numbers) { }

// 错误 - 编译错误
void method(int... numbers, String message) { }
```

### 3. **重载优先级**

当有多个匹配的方法时，固定参数的方法优先于可变参数：

```
public class OverloadExample {
    void test(int a, int b) {
        System.out.println("固定参数方法");
    }
    
    void test(int... nums) {
        System.out.println("可变参数方法");
    }
    
    public static void main(String[] args) {
        OverloadExample obj = new OverloadExample();
        obj.test(1, 2);  // 调用固定参数方法
        obj.test(1, 2, 3);  // 调用可变参数方法
    }
}
```

## 实际应用示例

### 1. **格式化输出工具**

```
public class Logger {
    public static void log(String format, Object... args) {
        String message = String.format(format, args);
        System.out.println("[INFO] " + message);
    }
    
    public static void main(String[] args) {
        log("用户 %s 登录成功", "张三");
        log("计算完成: %d + %d = %d", 10, 20, 30);
    }
}
```

### 2. **灵活的构造方法**

```
public class Product {
    private String name;
    private List<String> tags;
    
    public Product(String name, String... tags) {
        this.name = name;
        this.tags = Arrays.asList(tags);
    }
    
    // 使用
    Product p1 = new Product("手机");
    Product p2 = new Product("电脑", "数码", "电子产品");
}
```

### 3. **多个不同类型的参数**

```
public class MixedParams {
    // 先固定参数，后可变参数
    public static void printInfo(String title, String... details) {
        System.out.println("标题: " + title);
        System.out.println("详情:");
        for (String detail : details) {
            System.out.println("  - " + detail);
        }
    }
}
```

## 性能考虑

虽然可变参数很方便，但在性能敏感的场景需要注意：

```
// 每次调用都会创建新数组
public void process(String... items) {
    // 每次调用都会隐式创建 items 数组
}

// 更好的性能（避免数组创建）
public void process() {
    // 无参数情况
}

public void process(String item1) {
    // 一个参数
}

public void process(String item1, String item2) {
    // 两个参数
}

public void process(String[] items) {
    // 多个参数
}
```

## 与数组参数的区别

```
// 可变参数调用更灵活
method("a", "b", "c");  // 直接传值
method(new String[]{"a", "b", "c"});  // 需要创建数组

// 但数组参数可以明确表示参数不能为空
void method(String[] arr) { }  // 调用者必须显式创建数组
void method(String... arr) { }  // 可以不传参数
```

## 总结

**可变参数的优点：**

- 代码更简洁，调用更灵活
    
- 提高 API 的易用性
    
- 减少方法重载的数量
    

**使用建议：**

1. 在需要处理不定数量同类型参数时使用
    
2. 确保可变参数放在参数列表最后
    
3. 性能敏感场景考虑使用重载替代
    
4. 注意与重载方法的优先级
    

可变参数是 Java 5 引入的重要特性，合理使用可以让代码更加简洁优雅。