Java的异常处理是保证程序健壮性的核心机制。下面这个表格汇总了Java异常的主要类型和关键特性，可以帮助你快速建立整体认知。

|异常类型|继承关系|是否强制处理（检查性）|典型代表|产生原因/场景举例|
|---|---|---|---|---|
|**错误 (Error)**​|`Throwable`|否|`OutOfMemoryError`, `StackOverflowError`|系统级严重问题，如JVM内存耗尽、栈溢出。|
|**检查异常 (Checked Exception)**​|`Exception`|**是**​|`IOException`, `SQLException`|可预见的程序外部问题，如文件未找到、数据库连接失败。|
|**运行时异常 (Runtime Exception)**​|`Exception`-> `RuntimeException`|否|`NullPointerException`, `ArrayIndexOutOfBoundsException`|程序逻辑错误，如空指针、数组越界、类型转换错误。|

### 💡 异常处理机制

Java提供了多种关键字和代码块来捕获和处理异常，核心目标是 **“尝试执行可能出错的代码，并在发生异常时进行妥善处理，而非让程序崩溃”**​ 。

1. **try-catch-finally 块**
    
    这是最直接的处理方式。
    
    - **`try`**：包裹可能会抛出异常的代码（保护区）。
        
    - **`catch`**：捕获并处理特定类型的异常。可以有一个或多个`catch`块，也支持在一个`catch`块中捕获多种异常（如 `catch (IOException | SQLException e)`）。
        
    - **`finally`**：无论是否发生异常，其中的代码**必定会执行**。通常用于释放资源，如关闭文件、数据库连接等。
        
    
    ```
    try {
        // 尝试打开文件并读取
        FileReader file = new FileReader("somefile.txt");
        // ... 读取操作
    } catch (FileNotFoundException e) {
        // 处理文件未找到的情况
        System.err.println("文件不存在: " + e.getMessage());
    } catch (IOException e) {
        // 处理其他IO错误
        e.printStackTrace();
    } finally {
        // 无论是否异常，都确保资源被释放
        if (file != null) {
            try {
                file.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }
    ```
    
2. **throws 关键字**
    
    如果一个方法内部可能产生检查异常，但当前方法不适合或无法处理，可以使用 `throws`在方法签名上**声明**可能抛出的异常类型，将异常传递给上层调用者处理。这是一种**消极**的异常处理方式。
    
    ```
    // 该方法声明了可能抛出IOException，调用此方法的地方必须处理这个异常
    public void readFile(String fileName) throws IOException {
        BufferedReader reader = new BufferedReader(new FileReader(fileName));
        // ... 使用reader
        reader.close();
    }
    ```
    
3. **throw 关键字**
    
    用于在代码中**主动抛出**一个异常对象（可以是Java内置的或自定义的异常）。
    
    ```
    public void setAge(int age) {
        if (age < 0 || age > 150) {
            // 当参数不合法时，主动抛出异常
            throw new IllegalArgumentException("年龄不合法: " + age);
        }
        this.age = age;
    }
    ```
    
4. **try-with-resources 语句**
    
    这是Java 7引入的语法糖，用于自动管理资源（任何实现了 `AutoCloseable`接口的对象）。它可以完美替代传统的 `finally`块来关闭资源，使代码更简洁安全。
    
    ```
    // 资源会在try块结束后自动关闭，无需写finally块
    try (BufferedReader reader = new BufferedReader(new FileReader("somefile.txt"))) {
        // ... 使用reader读取文件
    } catch (IOException e) {
        e.printStackTrace();
    }
    ```
    

### ⚠️ 异常处理最佳实践

遵循这些原则可以写出更健壮、更易维护的代码。

- **具体化异常**：尽量捕获具体的异常类型（如 `FileNotFoundException`），而不是顶层的 `Exception`。这有助于精准定位问题。
    
- **避免“吞掉”异常**：空的 `catch`块或仅打印日志而不做任何处理会隐藏严重错误，给调试带来极大困难。
    
- **使用有意义的异常信息**：在抛出或记录异常时，提供清晰的上下文信息，便于快速定位问题根源。
    
- **利用自定义异常**：对于特定的业务逻辑错误，可以创建自定义异常类（继承 `Exception`或 `RuntimeException`），使错误语义更明确。
    
- **区分异常与流程控制**：**不要用异常来控制正常的程序流程**（例如，用捕获 `NumberFormatException`来判断字符串是否为数字）。应该使用条件判断（如 `if`）。
    

希望这份详细的梳理能帮助你牢固掌握Java异常处理！如果你对某个特定场景有更深入的疑问，我们可以继续探讨。