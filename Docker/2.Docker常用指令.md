这是 Docker 最常用的命令大全，按照使用场景分类整理。

## **一、 镜像管理（Image）**

| 命令                    | 说明       | 常用示例                                                                  |
| --------------------- | -------- | --------------------------------------------------------------------- |
| **`docker images`**​  | 列出本地所有镜像 | `docker images`                                                       |
| **`docker search`**​  | 从仓库搜索镜像  | `docker search nginx`                                                 |
| **`docker pull`**​    | 拉取/下载镜像  | `docker pull nginx:latest`                                            |
| **`docker push`**​    | 推送镜像到仓库  | `docker push myname/myimage:v1`                                       |
| **`docker rmi`**​     | 删除镜像     | `docker rmi nginx`  <br>`docker rmi -f $(docker images -q)`强制删除所有镜像   |
| **`docker build`**​   | 构建镜像     | `docker build -t myapp:1.0 .`  <br>`-t`指定标签                           |
| **`docker tag`**​     | 给镜像打标签   | `docker tag nginx myrepo/nginx:custom`                                |
| **`docker save`**​    | 导出镜像为文件  | `docker save nginx > nginx.tar`  <br>`docker save -o nginx.tar nginx` |
| **`docker load`**​    | 从文件导入镜像  | `docker load < nginx.tar`  <br>`docker load -i nginx.tar`             |
| **`docker history`**​ | 查看镜像构建历史 | `docker history nginx`                                                |

## **二、 容器管理（Container）**

### **1. 生命周期管理**

|命令|说明|常用示例|
|---|---|---|
|**`docker run`**​|**创建并启动容器**（最常用）|`docker run -d --name mynginx -p 8080:80 nginx`  <br>`-d`后台运行  <br>`--name`指定容器名  <br>`-p`端口映射  <br>`-v`挂载卷  <br>`-e`设置环境变量|
|**`docker create`**​|创建容器但不启动|`docker create --name mynginx nginx`|
|**`docker start`**​|启动已停止的容器|`docker start mynginx`|
|**`docker stop`**​|停止运行中的容器|`docker stop mynginx`|
|**`docker restart`**​|重启容器|`docker restart mynginx`|
|**`docker rm`**​|删除容器|`docker rm mynginx`  <br>`docker rm -f mynginx`强制删除运行中的容器  <br>`docker rm -f $(docker ps -aq)`删除所有容器|
|**`docker pause`**​|暂停容器|`docker pause mynginx`|
|**`docker unpause`**​|恢复暂停的容器|`docker unpause mynginx`|
|**`docker kill`**​|强制停止容器（发送SIGKILL）|`docker kill mynginx`|
|**`docker exec`**​|**在运行中的容器内执行命令**​|`docker exec -it mynginx bash`  <br>`-it`交互式终端  <br>`docker exec mynginx ls /app`|

### **2. 查看与监控**

|命令|说明|常用示例|
|---|---|---|
|**`docker ps`**​|列出容器|`docker ps`查看运行中的容器  <br>`docker ps -a`查看所有容器（包括已停止的）  <br>`docker ps -q`只显示容器ID|
|**`docker logs`**​|**查看容器日志**​|`docker logs mynginx`  <br>`docker logs -f mynginx`实时追踪日志  <br>`docker logs --tail 50 mynginx`查看最后50行|
|**`docker stats`**​|实时查看容器资源使用|`docker stats`  <br>`docker stats mynginx`|
|**`docker top`**​|查看容器内进程|`docker top mynginx`|
|**`docker inspect`**​|**查看容器/镜像详细信息**​|`docker inspect mynginx`  <br>`docker inspect --format='{{.NetworkSettings.IPAddress}}' mynginx`|
|**`docker diff`**​|查看容器文件系统的变化|`docker diff mynginx`|
|**`docker port`**​|查看容器的端口映射|`docker port mynginx`|

## **三、 网络管理（Network）**

|命令|说明|常用示例|
|---|---|---|
|**`docker network ls`**​|列出所有网络|`docker network ls`|
|**`docker network create`**​|创建网络|`docker network create mynet`  <br>`docker network create --subnet=172.20.0.0/16 mynet`|
|**`docker network connect`**​|将容器连接到网络|`docker network connect mynet mynginx`|
|**`docker network disconnect`**​|断开容器与网络的连接|`docker network disconnect mynet mynginx`|
|**`docker network inspect`**​|查看网络详细信息|`docker network inspect mynet`|
|**`docker network rm`**​|删除网络|`docker network rm mynet`|

## **四、 数据卷管理（Volume）**

|命令|说明|常用示例|
|---|---|---|
|**`docker volume ls`**​|列出所有数据卷|`docker volume ls`|
|**`docker volume create`**​|创建数据卷|`docker volume create myvolume`|
|**`docker volume inspect`**​|查看数据卷详细信息|`docker volume inspect myvolume`|
|**`docker volume rm`**​|删除数据卷|`docker volume rm myvolume`|
|**`docker volume prune`**​|删除未使用的数据卷|`docker volume prune`|

## **五、 系统与维护**

|命令|说明|常用示例|
|---|---|---|
|**`docker version`**​|查看 Docker 版本信息|`docker version`|
|**`docker info`**​|显示 Docker 系统信息|`docker info`|
|**`docker system df`**​|查看 Docker 磁盘使用情况|`docker system df`|
|**`docker system prune`**​|**清理无用资源**​|`docker system prune -a`  <br>清理所有未使用的镜像、容器、网络和数据卷  <br>`-a`包括所有未使用的镜像|
|**`docker cp`**​|**容器与主机间复制文件**​|`docker cp mynginx:/etc/nginx/nginx.conf ./`从容器复制到主机  <br>`docker cp ./index.html mynginx:/usr/share/nginx/html/`从主机复制到容器|
|**`docker commit`**​|从容器创建新镜像|`docker commit mynginx mynginx:modified`|
|**`docker login`**​|登录到镜像仓库|`docker login`  <br>`docker login registry.example.com`|
|**`docker logout`**​|登出镜像仓库|`docker logout`|

## **六、 Docker Compose 常用命令**

|命令|说明|常用示例|
|---|---|---|
|**`docker compose up`**​|启动所有服务|`docker compose up`  <br>`docker compose up -d`后台启动  <br>`docker compose up --build`重新构建镜像后启动|
|**`docker compose down`**​|停止并删除所有容器|`docker compose down`  <br>`docker compose down -v`同时删除数据卷|
|**`docker compose ps`**​|列出所有服务的容器|`docker compose ps`|
|**`docker compose logs`**​|查看服务日志|`docker compose logs`  <br>`docker compose logs -f`实时追踪  <br>`docker compose logs web`查看指定服务|
|**`docker compose exec`**​|在服务容器中执行命令|`docker compose exec web bash`|
|**`docker compose build`**​|构建或重新构建服务镜像|`docker compose build`|
|**`docker compose restart`**​|重启服务|`docker compose restart`|
|**`docker compose stop`**​|停止服务|`docker compose stop`|
|**`docker compose start`**​|启动已停止的服务|`docker compose start`|
|**`docker compose config`**​|验证和查看配置|`docker compose config`|

## **七、 实用命令组合与技巧**

### **1. 一键清理所有未使用的资源**

```
# 清理所有：停止的容器、未使用的网络、悬挂的镜像、构建缓存
docker system prune -a --volumes
```

### **2. 进入容器的 Bash 终端（最常用）**

```
docker exec -it 容器名或ID bash
# 如果容器没有 bash，可以使用 sh
docker exec -it 容器名或ID sh
```

### **3. 实时查看多个容器的日志**

```
docker-compose logs -f --tail=50 web database
```

### **4. 批量操作容器**

```
# 停止所有运行中的容器
docker stop $(docker ps -q)

# 删除所有已停止的容器
docker rm $(docker ps -aq)

# 删除所有悬挂镜像（未被任何容器引用）
docker image prune
```

### **5. 容器与主机端口映射检查**

```
# 查看所有容器的端口映射
docker ps --format "table {{.Names}}\t{{.Ports}}"
```

## **八、 最重要的 10 个命令（新手必记）**

1. **`docker run -d -p 主机端口:容器端口 --name 容器名 镜像名`**​ - 启动容器
    
2. **`docker ps -a`**​ - 查看所有容器
    
3. **`docker exec -it 容器名 bash`**​ - 进入容器
    
4. **`docker logs -f 容器名`**​ - 查看日志
    
5. **`docker stop 容器名`**​ - 停止容器
    
6. **`docker rm 容器名`**​ - 删除容器
    
7. **`docker images`**​ - 查看镜像
    
8. **`docker pull 镜像名`**​ - 拉取镜像
    
9. **`docker rmi 镜像名`**​ - 删除镜像
    
10. **`docker-compose up -d`**​ - 使用 Compose 启动多容器应用
    

## **提示**

- 使用 `--help`查看任何命令的帮助信息：`docker run --help`
    
- 容器名和容器ID可以互换使用，通常只需输入前几个字符（能唯一识别即可）
    
- 在生产环境中，谨慎使用 `-f`（强制）和 `prune`（清理）命令
    

掌握这些命令，你就可以高效地管理 Docker 容器和镜像了！