Redis 的 **Set（集合）** 是字符串类型的无序集合。它的底层通过哈希表实现，因此添加、删除、查找的复杂度都是 $O(1)$。

集合最大的特点是：**元素无序**且**不可重复**。

---

### 1. 基础操作（增删查）

这些命令用于管理集合内的单个或多个成员。

- **`SADD key member1 [member2]`**: 向集合添加一个或多个成员。忽略已存在的成员。
    
- **`SREM key member1 [member2]`**: 移除集合中的一个或多个成员。
    
- **`SISMEMBER key member`**: 判断元素是否是集合的成员（非常高效）。
    
- **`SCARD key`**: 获取集合的成员数（基数）。
    
- **`SMEMBERS key`**: 返回集合中的所有成员。
    
- **`SRANDMEMBER key [count]`**: 返回集合中一个或多个随机成员（不删除）。
    
- **`SPOP key [count]`**: 移除并返回集合中的一个或多个随机元素。
    

### 2. 集合运算（并、交、差）

这是 Redis Set 最强大的地方，非常适合处理社交网络中的关系。

- **`SINTER key1 [key2]`**: 返回所有给定集合的**交集**（共同好友）。
    
- **`SUNION key1 [key2]`**: 返回所有给定集合的**并集**（所有相关人）。
    
- **`SDIFF key1 [key2]`**: 返回第一个集合与其他集合的**差集**（我关注的人里你没关注的）。
    
- **`SINTERSTORE / SUNIONSTORE / SDIFFSTORE destination key1 [key2]`**: 将运算结果保存到指定的 `destination` 集合中，而不是直接返回。
    

![Venn diagram showing Set intersection, union, and difference operations，AI 生成](https://encrypted-tbn2.gstatic.com/licensed-image?q=tbn:ANd9GcSxR30eS7JjmyyZKsy2NxFPfnQ8uHnUtFlwo5dX_etCwFZVfxcLJwvOXm2_oKIhuku23f5YVqsVVvN63vAsKDYSKUPuih9B5jc5UySawkm3CJhZOAY)

Getty Images

---

### 3. 应用场景参考

|**场景**|**常用命令**|**说明**|
|---|---|---|
|**标签 (Tagging)**|`SADD`|给用户或文章贴标签，由于不可重复，多次贴同一个标签也无妨。|
|**抽奖系统**|`SRANDMEMBER` / `SPOP`|利用其随机性进行随机选人。|
|**社交关系 (共同好友)**|`SINTER`|两个用户的关注列表求交集。|
|**去重统计**|`SCARD`|统计独立访客（UV），虽然现在更多用 HyperLogLog，但 Set 更精确。|

---

### 💡 提示：Set vs List

- 如果你需要**保证元素唯一性**且不需要顺序，选 **Set**。
    
- 如果你需要**按插入顺序排序**且允许重复，选 **List**。
    
- 如果你需要元素唯一且**按权重排序**，那么你应该看 **Sorted Set (ZSet)**。
    

你想了解如何用 **Set** 实现一个简单的“共同关注”功能，还是想继续看看 **Sorted Set (有序集合)** 的命令？