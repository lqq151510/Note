Redis 的 String（字符串）类型是使用最频繁的数据结构。针对 String 的操作命令非常丰富，为了方便记忆和查阅，我将它们分为 **基础存取**、**条件与过期设置**、**批量操作**、**数值增减** 以及 **字符串修改** 五大类。

### 1. 基础存取命令

这是最常用的基本读写操作。

|**命令**|**说明**|**示例**|
|---|---|---|
|`SET key value`|设置指定 key 的值|`SET name "Redis"`|
|`GET key`|获取指定 key 的值|`GET name`|
|`GETSET key value`|将给定 key 的值设为 value，并返回 key 的旧值|`GETSET name "MongoDB"`|

### 2. 条件与过期设置命令

在实际开发中，我们经常需要在设置值的同时为其指定过期时间，或者在键不存在时才进行设置（常用于分布式锁）。

|**命令**|**说明**|**示例**|
|---|---|---|
|`SETEX key seconds value`|设置 key 的值，并将其过期时间设为 seconds 秒|`SETEX session_id 3600 "user123"`|
|`PSETEX key milliseconds value`|同上，但过期时间以毫秒为单位|`PSETEX lock 5000 "1"`|
|`SETNX key value`|只有在 key 不存在时，才设置 key 的值（Set if Not eXists）|`SETNX my_lock "true"`|

> **提示：** 在较新的 Redis 版本中，`SET` 命令已经整合了上述功能。例如，你可以直接使用 `SET key value EX 60 NX` 来实现“如果键不存在，则设置该键并让其 60 秒后过期”。

### 3. 批量操作命令

当你需要一次性读取或设置多个字符串时，使用批量命令可以有效减少网络请求的开销。

|**命令**|**说明**|**示例**|
|---|---|---|
|`MSET key value [key value ...]`|同时设置一个或多个 key-value 对|`MSET k1 "v1" k2 "v2"`|
|`MGET key [key ...]`|获取所有（一个或多个）给定 key 的值|`MGET k1 k2`|
|`MSETNX key value [key value ...]`|当且仅当所有给定 key 都不存在时，同时设置多个键值对（原子操作）|`MSETNX k3 "v3" k4 "v4"`|

### 4. 数值增减命令（计数器操作）

由于 Redis 内部会将表示数字的字符串解析为整数或浮点数，因此可以直接对它们进行原子性的加减操作，这在实现“点赞数”、“访问量”等功能时非常有用。

|**命令**|**说明**|**示例**|
|---|---|---|
|`INCR key`|将 key 中储存的数字值增一|`INCR page_view`|
|`DECR key`|将 key 中储存的数字值减一|`DECR stock_count`|
|`INCRBY key increment`|将 key 所储存的值加上给定的增量|`INCRBY score 10`|
|`DECRBY key decrement`|将 key 所储存的值减去给定的减量|`DECRBY score 5`|
|`INCRBYFLOAT key increment`|为 key 中所储存的值加上浮点数增量|`INCRBYFLOAT balance 1.5`|

### 5. 字符串修改与截取命令

如果你把 String 当作真正的文本字符串来处理，可以使用这些命令对其进行内部修改。

|**命令**|**说明**|**示例**|
|---|---|---|
|`APPEND key value`|如果 key 已经存在并且是一个字符串，将 value 追加到原来的值的末尾|`APPEND greeting " World"`|
|`STRLEN key`|返回 key 所储存的字符串值的长度|`STRLEN greeting`|
|`GETRANGE key start end`|获取字符串指定索引范围内的子串（支持负数索引表示倒数）|`GETRANGE name 0 2`|
|`SETRANGE key offset value`|用 value 参数覆写给定 key 所储存的字符串值，从偏移量 offset 开始|`SETRANGE email 5 "gmail.com"`|

---

